/*!
* Vigeframe - v0.0.1 - 2012-09-28
*
* http://vigeframe.herokuapp.com
*
* Copyright (c) 2012 Pointless Corp, Viget Labs;
*/


(function(a){"use strict";var b={delay:5e3,interval:null,$imgs:$(".vigeframe-inner img"),$selected:$()};b.init=function(){$(a).resize(b.setWidth),b.$imgs.click(function(){b.advance($(this))}),b.$imgs.first().click()},b.advance=function(a){b.pause(),b.$imgs.removeClass("before after"),b.$selected.removeClass("selected"),b.$selected=a||b.$selected.next(),b.$selected.length||(b.$selected=b.$imgs.first()),b.$selected.addClass("selected"),b.setOrder(b.$selected);var c=b.$imgs.index(b.$selected);b.setFrameWidth(c),b.setCaption(b.$selected),b.play()},b.pause=function(){a.clearInterval(b.interval)},b.play=function(){b.interval=a.setInterval(b.advance,b.delay)},b.setCaption=function(a){var b=$(".global-footer").empty(),c=$("<h3>").text(a.data("caption")),d=$("<h4>").text("-"+a.data("author"));b.append(c).append(d)},b.setFrameWidth=function(a){var c=b.$imgs.outerWidth(!0),d=b.$imgs.length;a=a||0,$(".vigeframe-inner").width(c*d).css({left:"50%",marginLeft:-(c*(a+.5))-2})},b.setOrder=function(a){var c=b.$imgs.length;a.nextAll("img").addClass("before").each(function(a){$(this).css("z-index",c+a)}),a.nextAll("img").addClass("after").each(function(a){$(this).css("z-index",c-a)})},b.init()})(window);